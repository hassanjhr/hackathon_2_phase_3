# Todo App - Backend API

FastAPI backend for the Todo Full-Stack Web Application with JWT authentication and PostgreSQL database.

## Tech Stack

- **Framework**: FastAPI
- **Database**: Neon Serverless PostgreSQL
- **ORM**: SQLModel
- **Authentication**: JWT with python-jose
- **Password Hashing**: bcrypt via passlib

## Setup

1. Create virtual environment:
```bash
python -m venv venv
source venv/bin/activate  # On Windows: venv\Scripts\activate
```

2. Install dependencies:
```bash
pip install -r requirements.txt
```

3. Configure environment:
```bash
cp .env.example .env
# Edit .env with your Neon database URL and JWT secret
```

4. Run the server:
```bash
uvicorn src.main:app --reload --host 0.0.0.0 --port 8000
```

## API Endpoints

### Authentication (Public)

**POST /api/auth/signup**
- Create new user account
- Request: `{ "email": "user@example.com", "password": "password123" }`
- Response: `{ "user": {...}, "token": "jwt_token", "token_type": "bearer" }`
- Status: 201 Created, 422 Validation Error

**POST /api/auth/signin**
- Sign in existing user
- Request: `{ "email": "user@example.com", "password": "password123" }`
- Response: `{ "user": {...}, "token": "jwt_token", "token_type": "bearer" }`
- Status: 200 OK, 401 Unauthorized

### Tasks (Protected - Requires JWT)

**GET /api/{user_id}/tasks**
- List all tasks for authenticated user
- Headers: `Authorization: Bearer {token}`
- Response: `{ "tasks": [...] }`
- Status: 200 OK, 401 Unauthorized, 403 Forbidden

**POST /api/{user_id}/tasks**
- Create new task
- Headers: `Authorization: Bearer {token}`
- Request: `{ "title": "Task title", "description": "Optional description" }`
- Response: Task object
- Status: 201 Created, 401 Unauthorized, 403 Forbidden, 422 Validation Error

**GET /api/{user_id}/tasks/{task_id}**
- Get single task details
- Headers: `Authorization: Bearer {token}`
- Response: Task object
- Status: 200 OK, 401 Unauthorized, 403 Forbidden, 404 Not Found

**PUT /api/{user_id}/tasks/{task_id}**
- Update task
- Headers: `Authorization: Bearer {token}`
- Request: `{ "title": "Updated title", "description": "Updated description" }`
- Response: Updated task object
- Status: 200 OK, 401 Unauthorized, 403 Forbidden, 404 Not Found, 422 Validation Error

**DELETE /api/{user_id}/tasks/{task_id}**
- Delete task permanently
- Headers: `Authorization: Bearer {token}`
- Response: No content
- Status: 204 No Content, 401 Unauthorized, 403 Forbidden, 404 Not Found

**PATCH /api/{user_id}/tasks/{task_id}/complete**
- Toggle task completion status
- Headers: `Authorization: Bearer {token}`
- Response: Updated task object
- Status: 200 OK, 401 Unauthorized, 403 Forbidden, 404 Not Found

## Interactive API Documentation

Once running, visit:
- Swagger UI: http://localhost:8000/docs
- ReDoc: http://localhost:8000/redoc

## Project Structure

```
backend/
├── src/
│   ├── main.py              # FastAPI application entry point
│   ├── config.py            # Environment configuration
│   ├── database.py          # Database connection
│   ├── models/              # SQLModel definitions
│   ├── schemas/             # Pydantic request/response schemas
│   ├── api/                 # API routes and dependencies
│   ├── middleware/          # JWT authentication middleware
│   └── utils/               # Security utilities
└── tests/                   # Test files
```

## Development

All code is generated by Claude Code agents following the Spec-Kit Plus workflow.
